/**
  ******************************************************************************
  * @file           : musicTheme.c
  * @brief          : This file regroup all functions allowing music handling for playing them.
  ******************************************************************************
  */

#include "musicTheme.h"

/**
* Mario main theme melody
*/
int melodyMario[] = {
  NOTE_E7, NOTE_E7, 0, NOTE_E7,
  0, NOTE_C7, NOTE_E7, 0,
  NOTE_G7, 0, 0,  0,
  NOTE_G6, 0, 0, 0,

  NOTE_C7, 0, 0, NOTE_G6,
  0, 0, NOTE_E6, 0,
  0, NOTE_A6, 0, NOTE_B6,
  0, NOTE_AS6, NOTE_A6, 0,

  NOTE_G6, NOTE_E7, NOTE_G7,
  NOTE_A7, 0, NOTE_F7, NOTE_G7,
  0, NOTE_E7, 0, NOTE_C7,
  NOTE_D7, NOTE_B6, 0, 0,

  NOTE_C7, 0, 0, NOTE_G6,
  0, 0, NOTE_E6, 0,
  0, NOTE_A6, 0, NOTE_B6,
  0, NOTE_AS6, NOTE_A6, 0,

  NOTE_G6, NOTE_E7, NOTE_G7,
  NOTE_A7, 0, NOTE_F7, NOTE_G7,
  0, NOTE_E7, 0, NOTE_C7,
  NOTE_D7, NOTE_B6, 0, 0
};

/**
* Mario main theme tempo
*/
int tempo[] = {
  12, 12, 12, 12,
  12, 12, 12, 12,
  12, 12, 12, 12,
  12, 12, 12, 12,

  12, 12, 12, 12,
  12, 12, 12, 12,
  12, 12, 12, 12,
  12, 12, 12, 12,

  9, 9, 9,
  12, 12, 12, 12,
  12, 12, 12, 12,
  12, 12, 12, 12,

  12, 12, 12, 12,
  12, 12, 12, 12,
  12, 12, 12, 12,
  12, 12, 12, 12,

  9, 9, 9,
  12, 12, 12, 12,
  12, 12, 12, 12,
  12, 12, 12, 12,
};

/**
* wait before play note
*/
int waitBeforeNextNote1 = 0;

/**
 * This method allows to play the mario theme music.
 */
void marioTheme() {

 	// iterate over the notes of the mario theme melody
	static int playNoteMario = 0;

	int size = sizeof(melodyMario) / sizeof(int);

	waitBeforeNextNote1 = 1000 / tempo[playNoteMario];
	buzz(melodyMario[playNoteMario], waitBeforeNextNote1);

	playNoteMario++;
	if (playNoteMario >= size) playNoteMario = 0;
}

/**
* made by my poor hand, ayez pitiÃ©
*/
int melodyMegalovania[] = {
		294,294,587,440,415,392,349,294,349,392,261,261,261,261,587,440,415,392,349,294,349,392,247,247,587,
		440,415,392,349,294,349,392,233,233,233,233,587,440,415,392,349,294,349,392,294,294,587,440,415,392,
		349,294,349,392,261,261,261,261,587,440,415,392,349,294,349,392,247,247,587,440,415,392,349,294,349,
		392,233,233,233,233,588,440,415,392,349,294,349,392,587,587,1175,880,831,784,698,587,698,784,523,523,
		1175,880,831,784,698,587,698,784,494,494,1175,880,831,784,698,587,698,784,466,466,1175,880,831,784,698,
		587,698,784,587,587,1175,880,831,784,698,587,698,784,523,523,1175,880,831,784,698,587,698,784,494,494,
		1175,880,831,784,698,587,698,784,466,466,1175,880,831,784,698,587,698,784,698,698,698,698,698,587,587,
		698,698,698,784,831,784,831,784,698,587,698,784,698,698,698,784,831,880,1046,880,1175,1175,1175,880,1175,
		1046,1568,880,880,880,880,880,784,784,880,880,880,880,784,880,1175,880,784,1175,880,784,698,1046,784,698,
		659,466,523,587,698,1046,698,587,698,784,831,784,698,587,831,784,698,587,698,784,831,880,1046,880,831,784,
		698,587,659,698,784,880,1046,1109,831,831,784,698,784,349,392,440,698,659,587,659,698,784,659,880,880,831,
		784,740,698,659,622,587,554,622,698,587,698,784,831,784,698,587,831,784,698,587,698,784,831,880,1046,880,
		831,784,698,587,659,698,784,880,1046,1109,831,831,784,698,784,349,392,440,698,659,587,659,698,784,659,880,
		880,831,784,740,698,659,622,587,554,622,233,349,330,294,349,233,349,330,294,294,294,277,261,247,233,220,
		208,196,185,175,165,156,147,233,349,330,294,349,123,196,349,294,392,349,261,294,261,220,196,261,233,349,
		330,294,147,147,349,330,261,330,247,196,220,261,147,147,349,330,261,330,247,196,220,261,233,233,116,233,
		233,233,116,116,116,233,261,261,130,261,261,261,130,130,130,261,294,294,147,294,277,277,139,139,139,277,
		261,261,130,261,247,247,123,123,123,247,233,233,116,233,233,233,116,116,116,233,261,261,130,261,261,261,130,
		130,130,261,294,294,147,294,294,294,147,147,147,294,294,294,147,294,294,294,147,147,147,294,233,233,116,233,
		233,233,116,116,116,233,261,261,130,261,261,261,130,130,130,261,294,294,147,294,277,277,139,139,139,277,261,
		261,130,261,247,247,123,123,123,247,233,233,116,233,233,233,116,116,116,233,261,261,130,261,261,261,130,130,
		130,261,294,147,294,220,294,294,294,175,147,294,196,294,147,294,220,294,294,294,175,147,294,196,294,294,
		587,440,415,392,349,294,349,392,261,261,261,261,587,440,415,392,349,294,349,392,247,247,587,440,415,392,
		349,294,349,392,233,233,233,233,587,440,415,392,349,294,349,392,294,294,587,440,415,392,349,294,349,392,
		261,261,261,261,587,440,415,392,349,294,349,392
};

/**
 * This method allows to play the megalovania theme music.
 */
void megalovaniaTheme() {

 	// iterate over the notes of the megalovania theme melody
	static int playNoteMegalo = 0;

	int size = sizeof(melodyMegalovania) / sizeof(int);

	waitBeforeNextNote1 = 1000 / 6;
	buzz(melodyMegalovania[playNoteMegalo], waitBeforeNextNote1);

	playNoteMegalo++;
	if (playNoteMegalo >= size) playNoteMegalo = 0;

}
